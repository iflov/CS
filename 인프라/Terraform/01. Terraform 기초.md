---
tags:
  - terraform
  - infrastructure
  - iac
  - devops
  - tutorial
created: 2025-01-20
updated: 2025-01-20
aliases:
  - Terraform Basics
  - ÌÖåÎùºÌèº Í∏∞Ï¥à
  - IaC Í∏∞Ï¥à
description: TerraformÏùò Í∏∞Î≥∏ Í∞úÎÖêÍ≥º Íµ¨Ï°∞Î•º Ïù¥Ìï¥ÌïòÍ≥† Ï≤´ Ïù∏ÌîÑÎùº Íµ¨ÏÑ±ÏùÑ ÏûëÏÑ±ÌïòÎäî ÏûÖÎ¨∏ Í∞ÄÏù¥Îìú
status: published
category: tutorial
---

# Terraform Í∏∞Ï¥à

> [!info] Í∞úÏöî
> HashiCorp TerraformÏùÄ ÏÑ†Ïñ∏Ï†Å ÏÑ§Ï†ï ÌååÏùºÏùÑ ÏÇ¨Ïö©ÌïòÏó¨ Ïù∏ÌîÑÎùºÎ•º ÏΩîÎìúÎ°ú Ï†ïÏùòÌïòÍ≥† Í¥ÄÎ¶¨ÌïòÎäî Infrastructure as Code(IaC) ÎèÑÍµ¨ÏûÖÎãàÎã§. Ïù¥ Î¨∏ÏÑúÏóêÏÑúÎäî TerraformÏùò Í∏∞Î≥∏ Í∞úÎÖêÍ≥º HCL Î¨∏Î≤ïÏùÑ ÌïôÏäµÌï©ÎãàÎã§.

## üìë Î™©Ï∞®

- [[#‚ö° Îπ†Î•∏ ÏãúÏûë]]
- [[#üéØ Infrastructure as CodeÎûÄ?]]
- [[#üì¶ ÏÑ§Ïπò Î∞è ÏÑ§Ï†ï]]
- [[#üîß HCL Í∏∞Î≥∏ Î¨∏Î≤ï]]
- [[#üí° Í∏∞Î≥∏ ÏõåÌÅ¨ÌîåÎ°úÏö∞]]
- [[#üöÄ Ï≤´ Î≤àÏß∏ ÌîÑÎ°úÏ†ùÌä∏]]
- [[#‚ö†Ô∏è Ï£ºÏùòÏÇ¨Ìï≠]]
- [[#üìö Îã§Ïùå Îã®Í≥Ñ]]

---

## ‚ö° Îπ†Î•∏ ÏãúÏûë

> [!example] ÏµúÏÜå Íµ¨ÏÑ± ÏòàÏ†ú
> Í∞ÄÏû• Í∞ÑÎã®Ìïú Terraform Íµ¨ÏÑ± ÌååÏùºÏûÖÎãàÎã§.

```hcl
# main.tf
resource "local_file" "hello" {
  filename = "/tmp/hello.txt"
  content  = "Hello, Terraform!"
}
```

```bash
# Ïã§Ìñâ Î™ÖÎ†πÏñ¥
terraform init    # Ï¥àÍ∏∞Ìôî
terraform plan    # Í≥ÑÌöç ÌôïÏù∏
terraform apply   # Ï†ÅÏö©
```

---

## üéØ Infrastructure as CodeÎûÄ?

> [!abstract] IaCÏùò ÌïµÏã¨ Í∞úÎÖê
> Ïù∏ÌîÑÎùºÎ•º ÌÖçÏä§Ìä∏ ÌååÏùºÎ°ú Ï†ïÏùòÌïòÍ≥† Î≤ÑÏ†Ñ Í¥ÄÎ¶¨ÌïòÎäî Î∞©Î≤ïÎ°†

### Ï†ÑÌÜµÏ†Å Î∞©Ïãù vs IaC

| Íµ¨Î∂Ñ | Ï†ÑÌÜµÏ†Å Î∞©Ïãù | IaC Î∞©Ïãù |
|------|------------|----------|
| **Í¥ÄÎ¶¨ Î∞©Î≤ï** | GUI/CLI ÏàòÎèô ÏûëÏóÖ | ÏΩîÎìúÎ°ú ÏûêÎèôÌôî |
| **Ïû¨ÌòÑÏÑ±** | Î¨∏ÏÑúÌôî ÏùòÏ°¥ | 100% Ïû¨ÌòÑ Í∞ÄÎä• |
| **Î≤ÑÏ†Ñ Í¥ÄÎ¶¨** | Ïñ¥Î†§ÏõÄ | GitÏúºÎ°ú Í¥ÄÎ¶¨ |
| **ÌòëÏóÖ** | Ï†úÌïúÏ†Å | ÏΩîÎìú Î¶¨Î∑∞ Í∞ÄÎä• |
| **Î°§Î∞±** | Î≥µÏû°Ìï® | Ïù¥Ï†Ñ Î≤ÑÏ†ÑÏúºÎ°ú ÏâΩÍ≤å Î≥µÏõê |

### TerraformÏùò ÌäπÏßï

- **ÏÑ†Ïñ∏Ï†Å Íµ¨Î¨∏**: ÏõêÌïòÎäî ÏµúÏ¢Ö ÏÉÅÌÉúÎ•º ÏÑ†Ïñ∏
- **Î©ÄÌã∞ ÌÅ¥ÎùºÏö∞Îìú**: AWS, Azure, GCP Îì± Îã§ÏñëÌïú Provider ÏßÄÏõê
- **ÏÉÅÌÉú Í¥ÄÎ¶¨**: ÌòÑÏû¨ Ïù∏ÌîÑÎùº ÏÉÅÌÉúÎ•º Ï∂îÏ†Å
- **Í≥ÑÌöç ÏàòÎ¶Ω**: Î≥ÄÍ≤ΩÏÇ¨Ìï≠ÏùÑ ÏÇ¨Ï†ÑÏóê ÌôïÏù∏

---

## üì¶ ÏÑ§Ïπò Î∞è ÏÑ§Ï†ï

### macOS (Homebrew)

> [!tip] Í∂åÏû• ÏÑ§Ïπò Î∞©Î≤ï
> HomebrewÎ•º ÏÇ¨Ïö©ÌïòÎ©¥ Î≤ÑÏ†Ñ Í¥ÄÎ¶¨Í∞Ä ÏâΩÏäµÎãàÎã§.

```bash
# Homebrew tap Ï∂îÍ∞Ä
brew tap hashicorp/tap

# Terraform ÏÑ§Ïπò
brew install hashicorp/tap/terraform

# ÏÑ§Ïπò ÌôïÏù∏
terraform --version
# Ï∂úÎ†•: Terraform v1.6.x on darwin_arm64
```

### Windows (Chocolatey)

```powershell
# ChocolateyÎ°ú ÏÑ§Ïπò
choco install terraform

# ÏÑ§Ïπò ÌôïÏù∏
terraform --version
```

### Linux (apt/yum)

```bash
# Ubuntu/Debian
wget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg
echo "deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/hashicorp.list
sudo apt update && sudo apt install terraform

# RHEL/CentOS
sudo yum install -y yum-utils
sudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo
sudo yum -y install terraform
```

### ÌôòÍ≤Ω ÏÑ§Ï†ï

```bash
# ÏûêÎèô ÏôÑÏÑ± ÏÑ§Ï†ï (bash)
terraform -install-autocomplete

# ÌôòÍ≤Ω Î≥ÄÏàò ÏÑ§Ï†ï
export TF_LOG=INFO  # Î°úÍ∑∏ Î†àÎ≤® ÏÑ§Ï†ï
export TF_VAR_region=us-west-2  # Î≥ÄÏàò ÏÑ§Ï†ï
```

---

## üîß HCL Í∏∞Î≥∏ Î¨∏Î≤ï

> [!note] HashiCorp Configuration Language
> TerraformÏùÄ HCLÏù¥ÎùºÎäî ÎèÖÏûêÏ†ÅÏù∏ Íµ¨ÏÑ± Ïñ∏Ïñ¥Î•º ÏÇ¨Ïö©Ìï©ÎãàÎã§.

### 1. Î∏îÎ°ù (Blocks)

Î∏îÎ°ùÏùÄ HCLÏùò Í∏∞Î≥∏ Íµ¨Ï°∞ Îã®ÏúÑÏûÖÎãàÎã§.

```hcl
# Í∏∞Î≥∏ Íµ¨Ï°∞
block_type "label1" "label2" {
  argument = value
  
  nested_block {
    argument = value
  }
}

# Ïã§Ï†ú ÏòàÏãú
resource "aws_instance" "web" {
  ami           = "ami-xxxxxxxxx"
  instance_type = "t2.micro"
  
  tags = {
    Name = "WebServer"
  }
}
```

### 2. Ïù∏ÏûêÏôÄ ÌëúÌòÑÏãù (Arguments & Expressions)

```hcl
# Î¶¨ÌÑ∞Îü¥ Í∞í
string_arg = "hello"
number_arg = 42
bool_arg   = true

# Î¶¨Ïä§Ìä∏
list_arg = ["item1", "item2", "item3"]

# Îßµ
map_arg = {
  key1 = "value1"
  key2 = "value2"
}

# Ï∞∏Ï°∞
reference = aws_instance.web.id

# Î≥¥Í∞ÑÎ≤ï
interpolation = "Instance ID: ${aws_instance.web.id}"
```

### 3. Î≥ÄÏàò (Variables)

```hcl
# Î≥ÄÏàò Ï†ïÏùò
variable "instance_type" {
  description = "EC2 instance type"
  type        = string
  default     = "t2.micro"
  
  validation {
    condition     = contains(["t2.micro", "t2.small", "t2.medium"], var.instance_type)
    error_message = "Invalid instance type."
  }
}

# Î≥ÄÏàò ÏÇ¨Ïö©
resource "aws_instance" "example" {
  instance_type = var.instance_type
}
```

### 4. Ï∂úÎ†• (Outputs)

```hcl
output "instance_public_ip" {
  description = "Public IP address of the instance"
  value       = aws_instance.web.public_ip
  sensitive   = false
}
```

### 5. Î°úÏª¨ Í∞í (Locals)

```hcl
locals {
  common_tags = {
    Environment = "Development"
    ManagedBy   = "Terraform"
  }
  
  instance_name = "${var.project}-${var.environment}-server"
}

resource "aws_instance" "example" {
  tags = merge(local.common_tags, {
    Name = local.instance_name
  })
}
```

### 6. Ï°∞Í±¥Î¨∏ (Conditionals)

```hcl
resource "aws_instance" "example" {
  instance_type = var.environment == "production" ? "t2.large" : "t2.micro"
  
  # Ï°∞Í±¥Î∂Ä Î∏îÎ°ù
  dynamic "ebs_block_device" {
    for_each = var.environment == "production" ? [1] : []
    
    content {
      device_name = "/dev/sdf"
      volume_size = 100
    }
  }
}
```

### 7. Î∞òÎ≥µÎ¨∏ (Loops)

```hcl
# count ÏÇ¨Ïö©
resource "aws_instance" "server" {
  count = 3
  
  ami           = "ami-xxxxxxxxx"
  instance_type = "t2.micro"
  
  tags = {
    Name = "Server-${count.index}"
  }
}

# for_each ÏÇ¨Ïö©
variable "instances" {
  default = {
    web = "t2.micro"
    app = "t2.small"
    db  = "t2.medium"
  }
}

resource "aws_instance" "server" {
  for_each = var.instances
  
  ami           = "ami-xxxxxxxxx"
  instance_type = each.value
  
  tags = {
    Name = "Server-${each.key}"
    Type = each.key
  }
}
```

### 8. Ìï®Ïàò (Functions)

> [!example] ÏûêÏ£º ÏÇ¨Ïö©ÎêòÎäî Ìï®ÏàòÎì§
> TerraformÏùÄ Îã§ÏñëÌïú ÎÇ¥Ïû• Ìï®ÏàòÎ•º Ï†úÍ≥µÌï©ÎãàÎã§.

```hcl
# Î¨∏ÏûêÏó¥ Ìï®Ïàò
locals {
  uppercase = upper("hello")                    # "HELLO"
  lowercase = lower("HELLO")                    # "hello"
  substring = substr("hello world", 0, 5)       # "hello"
  replaced  = replace("hello world", "world", "terraform")  # "hello terraform"
}

# Ïª¨Î†âÏÖò Ìï®Ïàò
locals {
  list_length = length(["a", "b", "c"])         # 3
  list_concat = concat(["a"], ["b", "c"])       # ["a", "b", "c"]
  map_keys    = keys({a = 1, b = 2})            # ["a", "b"]
  map_merge   = merge({a = 1}, {b = 2})         # {a = 1, b = 2}
}

# ÌååÏùº ÏãúÏä§ÌÖú Ìï®Ïàò
locals {
  file_content = file("${path.module}/data.txt")
  json_data    = jsondecode(file("${path.module}/config.json"))
  yaml_data    = yamldecode(file("${path.module}/config.yaml"))
}
```

---

## üí° Í∏∞Î≥∏ ÏõåÌÅ¨ÌîåÎ°úÏö∞

> [!tip] Terraform ÏûëÏóÖ ÏàúÏÑú
> Ïù¥ ÏõåÌÅ¨ÌîåÎ°úÏö∞Î•º Îî∞Î•¥Î©¥ ÏïàÏ†ÑÌïòÍ≤å Ïù∏ÌîÑÎùºÎ•º Í¥ÄÎ¶¨Ìï† Ïàò ÏûàÏäµÎãàÎã§.

```mermaid
graph LR
    A[ÏûëÏÑ±] --> B[Ï¥àÍ∏∞Ìôî]
    B --> C[Í≤ÄÏ¶ù]
    C --> D[Í≥ÑÌöç]
    D --> E[Ï†ÅÏö©]
    E --> F[ÌôïÏù∏]
```

### 1. ÏûëÏÑ± (Write)

```hcl
# main.tf
terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
  }
}

provider "aws" {
  region = "us-west-2"
}

resource "aws_instance" "example" {
  ami           = "ami-xxxxxxxxx"
  instance_type = "t2.micro"
}
```

### 2. Ï¥àÍ∏∞Ìôî (Initialize)

```bash
terraform init

# Ï∂úÎ†• ÏòàÏãú
Initializing the backend...
Initializing provider plugins...
- Installing hashicorp/aws v5.0.0...
Terraform has been successfully initialized!
```

### 3. Í≤ÄÏ¶ù (Validate)

```bash
terraform validate

# Ï∂úÎ†• ÏòàÏãú
Success! The configuration is valid.
```

### 4. Í≥ÑÌöç (Plan)

```bash
terraform plan

# Ï∂úÎ†• ÏòàÏãú
Terraform will perform the following actions:
  + resource "aws_instance" "example" {
      + ami           = "ami-xxxxxxxxx"
      + instance_type = "t2.micro"
      ...
    }
Plan: 1 to add, 0 to change, 0 to destroy.
```

### 5. Ï†ÅÏö© (Apply)

```bash
terraform apply

# ÎòêÎäî ÏûêÎèô ÏäπÏù∏
terraform apply -auto-approve
```

### 6. ÌôïÏù∏ (Show)

```bash
# ÌòÑÏû¨ ÏÉÅÌÉú ÌôïÏù∏
terraform show

# ÌäπÏ†ï Î¶¨ÏÜåÏä§ ÌôïÏù∏
terraform state show aws_instance.example
```

---

## üöÄ Ï≤´ Î≤àÏß∏ ÌîÑÎ°úÏ†ùÌä∏

> [!example] Ïã§Ïäµ: Í∞ÑÎã®Ìïú Ïõπ ÏÑúÎ≤Ñ Íµ¨ÏÑ±
> AWS EC2 Ïù∏Ïä§ÌÑ¥Ïä§ÏôÄ Î≥¥Ïïà Í∑∏Î£πÏùÑ ÏÉùÏÑ±ÌïòÎäî ÏòàÏ†úÏûÖÎãàÎã§.

### ÌîÑÎ°úÏ†ùÌä∏ Íµ¨Ï°∞

```
my-first-terraform/
‚îú‚îÄ‚îÄ main.tf         # Î©îÏù∏ Íµ¨ÏÑ±
‚îú‚îÄ‚îÄ variables.tf    # Î≥ÄÏàò Ï†ïÏùò
‚îú‚îÄ‚îÄ outputs.tf      # Ï∂úÎ†• Ï†ïÏùò
‚îî‚îÄ‚îÄ terraform.tfvars # Î≥ÄÏàò Í∞í
```

### main.tf

```hcl
terraform {
  required_version = ">= 1.0"
  
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
  }
}

provider "aws" {
  region = var.aws_region
}

# Î≥¥Ïïà Í∑∏Î£π
resource "aws_security_group" "web" {
  name        = "${var.project_name}-web-sg"
  description = "Security group for web server"
  
  ingress {
    from_port   = 80
    to_port     = 80
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }
  
  ingress {
    from_port   = 22
    to_port     = 22
    protocol    = "tcp"
    cidr_blocks = [var.ssh_allowed_ip]
  }
  
  egress {
    from_port   = 0
    to_port     = 0
    protocol    = "-1"
    cidr_blocks = ["0.0.0.0/0"]
  }
  
  tags = local.common_tags
}

# EC2 Ïù∏Ïä§ÌÑ¥Ïä§
resource "aws_instance" "web" {
  ami           = data.aws_ami.amazon_linux.id
  instance_type = var.instance_type
  
  vpc_security_group_ids = [aws_security_group.web.id]
  
  user_data = <<-EOF
    #!/bin/bash
    yum update -y
    yum install -y httpd
    systemctl start httpd
    systemctl enable httpd
    echo "<h1>Hello from Terraform!</h1>" > /var/www/html/index.html
  EOF
  
  tags = merge(local.common_tags, {
    Name = "${var.project_name}-web-server"
  })
}

# ÏµúÏã† Amazon Linux AMI Ï°∞Ìöå
data "aws_ami" "amazon_linux" {
  most_recent = true
  owners      = ["amazon"]
  
  filter {
    name   = "name"
    values = ["amzn2-ami-hvm-*-x86_64-gp2"]
  }
}

locals {
  common_tags = {
    Project     = var.project_name
    Environment = var.environment
    ManagedBy   = "Terraform"
  }
}
```

### variables.tf

```hcl
variable "aws_region" {
  description = "AWS region"
  type        = string
  default     = "us-west-2"
}

variable "project_name" {
  description = "Project name"
  type        = string
  default     = "my-first-terraform"
}

variable "environment" {
  description = "Environment name"
  type        = string
  default     = "dev"
}

variable "instance_type" {
  description = "EC2 instance type"
  type        = string
  default     = "t2.micro"
}

variable "ssh_allowed_ip" {
  description = "IP address allowed for SSH"
  type        = string
  default     = "0.0.0.0/0"  # Ï£ºÏùò: ÌîÑÎ°úÎçïÏÖòÏóêÏÑúÎäî ÌäπÏ†ï IPÎßå ÌóàÏö©
}
```

### outputs.tf

```hcl
output "instance_id" {
  description = "ID of the EC2 instance"
  value       = aws_instance.web.id
}

output "instance_public_ip" {
  description = "Public IP address of the EC2 instance"
  value       = aws_instance.web.public_ip
}

output "instance_public_dns" {
  description = "Public DNS of the EC2 instance"
  value       = aws_instance.web.public_dns
}

output "web_url" {
  description = "URL of the web server"
  value       = "http://${aws_instance.web.public_ip}"
}
```

### Ïã§Ìñâ Î∞©Î≤ï

```bash
# 1. AWS ÏûêÍ≤© Ï¶ùÎ™Ö ÏÑ§Ï†ï
export AWS_ACCESS_KEY_ID="your-access-key"
export AWS_SECRET_ACCESS_KEY="your-secret-key"

# 2. Ï¥àÍ∏∞Ìôî
terraform init

# 3. Í≥ÑÌöç ÌôïÏù∏
terraform plan

# 4. Ïù∏ÌîÑÎùº ÏÉùÏÑ±
terraform apply

# 5. Ïõπ ÏÑúÎ≤Ñ Ï†ëÏÜç
curl $(terraform output -raw web_url)

# 6. Ï†ïÎ¶¨ (ÏÇ¨Ïö© ÌõÑ)
terraform destroy
```

---

## ‚ö†Ô∏è Ï£ºÏùòÏÇ¨Ìï≠

> [!warning] Ï¥àÎ≥¥ÏûêÍ∞Ä ÏûêÏ£º ÌïòÎäî Ïã§Ïàò
> Ïù¥Îü¨Ìïú Ïã§ÏàòÎ•º ÌîºÌïòÎ©¥ ÏïàÏ†ÑÌïòÍ≤å TerraformÏùÑ ÏÇ¨Ïö©Ìï† Ïàò ÏûàÏäµÎãàÎã§.

### 1. State ÌååÏùº Í¥ÄÎ¶¨

- ‚ùå **Ï†àÎåÄ ÌïòÏßÄ Îßê Í≤É**: State ÌååÏùºÏùÑ GitÏóê Ïª§Î∞ã
- ‚úÖ **Ïò¨Î∞îÎ•∏ Î∞©Î≤ï**: `.gitignore`Ïóê Ï∂îÍ∞Ä

```gitignore
# .gitignore
*.tfstate
*.tfstate.*
.terraform/
.terraform.lock.hcl
```

### 2. ÎØºÍ∞êÌïú Ï†ïÎ≥¥ Î≥¥Ìò∏

- ‚ùå **Ï†àÎåÄ ÌïòÏßÄ Îßê Í≤É**: ÎπÑÎ∞ÄÎ≤àÌò∏ÎÇò API ÌÇ§Î•º ÌïòÎìúÏΩîÎî©
- ‚úÖ **Ïò¨Î∞îÎ•∏ Î∞©Î≤ï**: ÌôòÍ≤Ω Î≥ÄÏàòÎÇò ÏãúÌÅ¨Î¶ø Í¥ÄÎ¶¨ ÎèÑÍµ¨ ÏÇ¨Ïö©

```hcl
# ÏûòÎ™ªÎêú Ïòà
variable "db_password" {
  default = "mypassword123"  # Ï†àÎåÄ Ïù¥Î†áÍ≤å ÌïòÏßÄ ÎßàÏÑ∏Ïöî!
}

# Ïò¨Î∞îÎ•∏ Ïòà
variable "db_password" {
  description = "Database password"
  type        = string
  sensitive   = true  # Î°úÍ∑∏Ïóê ÌëúÏãúÎêòÏßÄ ÏïäÏùå
}
```

### 3. Î¶¨ÏÜåÏä§ ÏÇ≠Ï†ú Ï£ºÏùò

```bash
# ÏÇ≠Ï†ú Ï†Ñ Ìï≠ÏÉÅ Í≥ÑÌöç ÌôïÏù∏
terraform plan -destroy

# ÌäπÏ†ï Î¶¨ÏÜåÏä§Îßå ÏÇ≠Ï†ú
terraform destroy -target=aws_instance.test
```

### 4. Î≤ÑÏ†Ñ Í≥†Ï†ï

```hcl
# Ìï≠ÏÉÅ Provider Î≤ÑÏ†ÑÏùÑ Í≥†Ï†ï
terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"  # 5.x Î≤ÑÏ†ÑÎßå ÏÇ¨Ïö©
    }
  }
}
```

---

## üìö Îã§Ïùå Îã®Í≥Ñ

> [!success] ÌïôÏäµ Í≤ΩÎ°ú
> Îã§Ïùå Î¨∏ÏÑúÎì§ÏùÑ ÏàúÏÑúÎåÄÎ°ú ÌïôÏäµÌïòÏÑ∏Ïöî.

1. [[Terraform init ÏÉÅÏÑ∏]] - Ï¥àÍ∏∞Ìôî Í≥ºÏ†ï ÍπäÏù¥ Ïù¥Ìï¥ÌïòÍ∏∞
2. [[04. Terraform Î≥ÄÏàò (Input Variables)]] - ÎèôÏ†Å Íµ¨ÏÑ± ÎßåÎì§Í∏∞
3. [[05. Terraform Ï∂úÎ†• Î≥ÄÏàò (Output)]] - Î¶¨ÏÜåÏä§ Ï†ïÎ≥¥ Ï∂úÎ†•ÌïòÍ∏∞
4. [[Terraform Provider Í¥ÄÎ¶¨]] - Provider ÏÑ§Ï†ïÍ≥º Î≤ÑÏ†Ñ Í¥ÄÎ¶¨
5. [[Terraform ÏÉÅÌÉú Í¥ÄÎ¶¨]] - State ÌååÏùº Ïù¥Ìï¥ÏôÄ Í¥ÄÎ¶¨

### Ï∂îÍ∞Ä ÌïôÏäµ ÏûêÎ£å

- [Terraform Í≥µÏãù Î¨∏ÏÑú](https://www.terraform.io/docs)
- [HashiCorp Learn](https://learn.hashicorp.com/terraform)
- [Terraform Registry](https://registry.terraform.io/)
- [[00. Terraform ÌïôÏäµ Í∞ÄÏù¥Îìú]] - Ï†ÑÏ≤¥ ÌïôÏäµ Î°úÎìúÎßµ

---

> [!quote]
> "Infrastructure as Code is not just about automation; it's about applying software engineering practices to infrastructure management." - HashiCorp

> [!tip] Ïã§Ïäµ ÌåÅ
> Î™®Îì† ÏòàÏ†úÎäî ÏßÅÏ†ë Ïã§ÌñâÌï¥Î≥¥ÏÑ∏Ïöî. Ïã§ÏäµÏùÑ ÌÜµÌï¥ Ïù¥Î°†ÏùÑ Ï≤¥ÎìùÌïòÎäî Í≤ÉÏù¥ Í∞ÄÏû• Ìö®Í≥ºÏ†ÅÏûÖÎãàÎã§. AWS Free TierÎ•º ÌôúÏö©ÌïòÎ©¥ Î¨¥Î£åÎ°ú Ïã§ÏäµÌï† Ïàò ÏûàÏäµÎãàÎã§.


---

## üî¢ Terraform ÌÉÄÏûÖ ÏãúÏä§ÌÖú

> [!important] ÌÉÄÏûÖ ÏãúÏä§ÌÖúÏùò Ï§ëÏöîÏÑ±
> TerraformÏùÄ Í∞ïÌÉÄÏûÖ Ïñ∏Ïñ¥Î°ú, Í∞Å Í∞íÏùÄ Î™ÖÌôïÌïú ÌÉÄÏûÖÏùÑ Í∞ÄÏßëÎãàÎã§. ÌÉÄÏûÖÏùÑ Ïù¥Ìï¥ÌïòÎ©¥ Îçî ÏïàÏ†ÑÌïòÍ≥† ÏòàÏ∏° Í∞ÄÎä•Ìïú ÏΩîÎìúÎ•º ÏûëÏÑ±Ìï† Ïàò ÏûàÏäµÎãàÎã§.

### Í∏∞Î≥∏ ÌÉÄÏûÖ (Primitive Types)

```hcl
# string - Î¨∏ÏûêÏó¥
variable "name" {
  type    = string
  default = "hello"
}

# number - Ïà´Ïûê (Ï†ïÏàò Î∞è Ïã§Ïàò)
variable "count" {
  type    = number
  default = 42
}

variable "price" {
  type    = number
  default = 19.99
}

# bool - Î∂àÎ¶¨Ïñ∏
variable "enable_monitoring" {
  type    = bool
  default = true
}
```

### Ïª¨Î†âÏÖò ÌÉÄÏûÖ (Collection Types)

#### List - ÏàúÏÑúÍ∞Ä ÏûàÎäî ÎèôÏùº ÌÉÄÏûÖ Ïª¨Î†âÏÖò
```hcl
variable "availability_zones" {
  type    = list(string)
  default = ["us-west-2a", "us-west-2b", "us-west-2c"]
}

# Î¶¨Ïä§Ìä∏ Ï†ëÍ∑º Î∞è Ï°∞Ïûë
locals {
  first_zone  = var.availability_zones[0]           # "us-west-2a"
  zone_count  = length(var.availability_zones)      # 3
  sorted_zones = sort(var.availability_zones)
  filtered_zones = [for z in var.availability_zones : z if can(regex("2a$", z))]
}
```

#### Set - Ï§ëÎ≥µ ÏóÜÎäî ÏàúÏÑú ÏóÜÎäî Ïª¨Î†âÏÖò
```hcl
variable "security_groups" {
  type    = set(string)
  default = ["sg-123", "sg-456", "sg-789", "sg-123"]  # sg-123 Ï§ëÎ≥µ ÏûêÎèô Ï†úÍ±∞
}

# Set ÌôúÏö©
locals {
  # SetÏùÄ Ïù∏Îç±Ïä§ Ï†ëÍ∑º Î∂àÍ∞Ä, Î≥ÄÌôò ÌïÑÏöî
  sg_list = tolist(var.security_groups)
  sg_count = length(var.security_groups)  # 3 (Ï§ëÎ≥µ Ï†úÍ±∞Îê®)
  
  # Set Ïó∞ÏÇ∞
  set_a = toset(["a", "b", "c"])
  set_b = toset(["b", "c", "d"])
  union = setunion(local.set_a, local.set_b)      # {"a", "b", "c", "d"}
  intersection = setintersection(local.set_a, local.set_b)  # {"b", "c"}
}
```

#### Map - ÌÇ§-Í∞í Ïåç
```hcl
variable "instance_tags" {
  type = map(string)
  default = {
    Name        = "WebServer"
    Environment = "Production"
    Team        = "DevOps"
  }
}

# Îßµ Ï†ëÍ∑º Î∞è Ï°∞Ïûë
locals {
  env_tag  = var.instance_tags["Environment"]       # "Production"
  name_tag = var.instance_tags.Name                 # "WebServer"
  tag_keys = keys(var.instance_tags)                # ["Environment", "Name", "Team"]
  tag_values = values(var.instance_tags)
  
  # Îßµ Î≥ëÌï©
  additional_tags = {
    Owner = "admin"
    Cost  = "project-123"
  }
  all_tags = merge(var.instance_tags, local.additional_tags)
}
```

#### Tuple - Í≥†Ï†ï Í∏∏Ïù¥, Îã§Î•∏ ÌÉÄÏûÖ ÌóàÏö©
```hcl
variable "database_config" {
  type    = tuple([string, number, bool])
  default = ["postgres", 5432, true]
}

# ÌäúÌîå Ï†ëÍ∑º
locals {
  db_type = var.database_config[0]  # "postgres"
  db_port = var.database_config[1]  # 5432
  db_ssl  = var.database_config[2]  # true
  
  # ÌäúÌîåÏùÄ Í≥†Ï†ï Í∏∏Ïù¥, Í∞Å ÏúÑÏπòÏùò ÌÉÄÏûÖÏù¥ Ï†ïÌï¥Ïßê
  # var.database_config[3] - Ïò§Î•ò Î∞úÏÉù
}
```

#### Object - Î™ÖÎ™ÖÎêú ÏÜçÏÑ±ÏùÑ Í∞ÄÏßÑ Íµ¨Ï°∞Ï≤¥
```hcl
variable "server_config" {
  type = object({
    instance_type = string
    monitoring    = bool
    disk_size     = number
    tags         = map(string)
  })
  
  default = {
    instance_type = "t2.micro"
    monitoring    = true
    disk_size     = 30
    tags = {
      Name = "MyServer"
      Env  = "Dev"
    }
  }
}

# Í∞ùÏ≤¥ Ï†ëÍ∑º
locals {
  instance = var.server_config.instance_type
  monitor  = var.server_config.monitoring
  server_name = var.server_config.tags["Name"]
}
```

### Î≥µÌï© ÌÉÄÏûÖ Ìå®ÌÑ¥

```hcl
# Î¶¨Ïä§Ìä∏Ïùò Îßµ - Ïó¨Îü¨ ÏÑúÎ≤Ñ ÏÑ§Ï†ï
variable "servers" {
  type = list(map(string))
  default = [
    {
      name = "web-1"
      type = "t2.micro"
      zone = "us-west-2a"
    },
    {
      name = "web-2"
      type = "t2.small"
      zone = "us-west-2b"
    }
  ]
}

# ÎßµÏùò Î¶¨Ïä§Ìä∏ - ÌôòÍ≤ΩÎ≥Ñ ÏÑ§Ï†ï
variable "subnet_configs" {
  type = map(list(string))
  default = {
    public   = ["10.0.1.0/24", "10.0.2.0/24"]
    private  = ["10.0.10.0/24", "10.0.11.0/24"]
    database = ["10.0.20.0/24", "10.0.21.0/24"]
  }
}

# ÎßµÏùò Í∞ùÏ≤¥ - ÌôòÍ≤ΩÎ≥Ñ ÏÉÅÏÑ∏ ÏÑ§Ï†ï
variable "environment_configs" {
  type = map(object({
    instance_type = string
    min_size      = number
    max_size      = number
    subnets       = list(string)
    enable_monitoring = bool
  }))
  
  default = {
    dev = {
      instance_type = "t2.micro"
      min_size      = 1
      max_size      = 2
      subnets       = ["subnet-dev-1", "subnet-dev-2"]
      enable_monitoring = false
    }
    prod = {
      instance_type = "t2.large"
      min_size      = 3
      max_size      = 10
      subnets       = ["subnet-prod-1", "subnet-prod-2", "subnet-prod-3"]
      enable_monitoring = true
    }
  }
}
```

### Any ÌÉÄÏûÖÍ≥º Optional

```hcl
# any ÌÉÄÏûÖ - Î™®Îì† ÌÉÄÏûÖ ÌóàÏö© (ÌÉÄÏûÖ Ï∂îÎ°†)
variable "flexible_config" {
  type = any
  default = {
    string_val = "hello"
    number_val = 42
    list_val   = [1, 2, 3]
    nested = {
      key = "value"
    }
  }
}

# optional ÏÜçÏÑ± (Terraform 1.3+)
variable "database" {
  type = object({
    engine    = string
    version   = optional(string, "14.0")    # Í∏∞Î≥∏Í∞í ÏßÄÏ†ï
    port      = optional(number, 5432)
    backup    = optional(bool, true)
    replicas  = optional(number)            # Í∏∞Î≥∏Í∞í ÏóÜÏùå (null)
  })
  
  default = {
    engine = "postgres"
    # version, port, backupÏùÄ optional Í∏∞Î≥∏Í∞í ÏÇ¨Ïö©
  }
}

# nullable Î≥ÄÏàò
variable "optional_tag" {
  type     = string
  nullable = true  # null Í∞í ÌóàÏö©
  default  = null
}
```

### ÌÉÄÏûÖ Î≥ÄÌôò Ìï®Ïàò

```hcl
locals {
  # Í∏∞Î≥∏ ÌÉÄÏûÖ Î≥ÄÌôò
  string_to_number = tonumber("42")           # 42
  number_to_string = tostring(42)             # "42"
  bool_to_string   = tostring(true)           # "true"
  
  # Ïª¨Î†âÏÖò Î≥ÄÌôò
  list_to_set = toset(["a", "b", "a"])       # {"a", "b"} - Ï§ëÎ≥µ Ï†úÍ±∞
  set_to_list = tolist(toset(["a", "b"]))    # ["a", "b"]
  
  # TupleÍ≥º List Î≥ÄÌôò
  tuple_example = tuple(["a", "b", "c"])
  list_from_tuple = tolist(tuple_example)
  
  # MapÍ≥º Object Î≥ÄÌôò
  map_example = tomap({
    key1 = "value1"
    key2 = "value2"
  })
  
  # JSON Î≥ÄÌôò
  json_string = jsonencode({
    name = "example"
    value = 123
  })
  json_decoded = jsondecode(local.json_string)
}
```

### ÌÉÄÏûÖ Í≤ÄÏ¶ùÍ≥º Ï†úÏïΩ

```hcl
# ÌÉÄÏûÖ Ï†úÏïΩÏù¥ ÏûàÎäî Î≥ÄÏàò
variable "allowed_ports" {
  type = list(number)
  
  validation {
    condition = alltrue([
      for port in var.allowed_ports : port >= 1 && port <= 65535
    ])
    error_message = "Port numbers must be between 1 and 65535."
  }
}

# Î≥µÏû°Ìïú Í∞ùÏ≤¥ Í≤ÄÏ¶ù
variable "cluster_config" {
  type = object({
    name = string
    size = number
    nodes = list(object({
      name          = string
      instance_type = string
      disk_size     = number
    }))
  })
  
  validation {
    condition = var.cluster_config.size >= 1 && var.cluster_config.size <= 100
    error_message = "Cluster size must be between 1 and 100."
  }
  
  validation {
    condition = alltrue([
      for node in var.cluster_config.nodes : 
      contains(["t2.micro", "t2.small", "t2.medium"], node.instance_type)
    ])
    error_message = "Node instance types must be t2.micro, t2.small, or t2.medium."
  }
}
```

### Ïã§Ï†Ñ ÌôúÏö©: Î≥µÏû°Ìïú Ïù∏ÌîÑÎùº Íµ¨ÏÑ±

```hcl
# ÏôÑÏ†ÑÌïú Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò Ïä§ÌÉù Íµ¨ÏÑ±
variable "app_stack" {
  type = object({
    name = string
    environment = string
    
    network = object({
      vpc_cidr = string
      availability_zones = list(string)
      public_subnets  = list(string)
      private_subnets = list(string)
    })
    
    compute = object({
      web_servers = list(object({
        name          = string
        instance_type = string
        count         = number
      }))
      app_servers = optional(list(object({
        name          = string
        instance_type = string
        count         = number
      })), [])
    })
    
    database = optional(object({
      engine         = string
      instance_class = string
      allocated_storage = number
      multi_az      = bool
    }))
    
    tags = map(string)
  })
  
  default = {
    name = "myapp"
    environment = "production"
    
    network = {
      vpc_cidr = "10.0.0.0/16"
      availability_zones = ["us-west-2a", "us-west-2b"]
      public_subnets  = ["10.0.1.0/24", "10.0.2.0/24"]
      private_subnets = ["10.0.10.0/24", "10.0.11.0/24"]
    }
    
    compute = {
      web_servers = [
        {
          name          = "web"
          instance_type = "t2.small"
          count         = 2
        }
      ]
    }
    
    database = {
      engine         = "postgres"
      instance_class = "db.t3.micro"
      allocated_storage = 20
      multi_az      = true
    }
    
    tags = {
      Project     = "MyApp"
      Environment = "Production"
      ManagedBy   = "Terraform"
    }
  }
}

# ÌÉÄÏûÖ ÌôúÏö©Ìïú Î¶¨ÏÜåÏä§ ÏÉùÏÑ±
resource "aws_instance" "web" {
  for_each = {
    for idx, server in var.app_stack.compute.web_servers : 
    "${server.name}-${idx}" => server
  }
  
  instance_type = each.value.instance_type
  count        = each.value.count
  
  tags = merge(
    var.app_stack.tags,
    {
      Name = each.key
      Type = "WebServer"
    }
  )
}
```