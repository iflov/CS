---
tags:
- terraform
- cli
- commands
- infrastructure
- devops
created: 2025-01-15
updated: 2025-01-15
aliases:
- Terraform CLI
- 테라폼 명령어
description: Terraform CLI 명령어 완벽 가이드 - 워크플로우부터 고급 기능까지
status: published
category: reference
---

# Terraform 명령어

> [!info] 개요
> Terraform은 인프라를 관리하기 위한 강력한 CLI 명령어를 제공합니다. 이 가이드는 초기화부터 삭제까지 전체 워크플로우에 필요한 모든 명령어를 체계적으로 정리한 완벽한 레퍼런스입니다.

## 📑 목차

- [[#⚡ 핵심 명령어]]
- [[#✅ 검증 및 포맷팅]]
- [[#📊 상태 관리 명령어]]
- [[#🔍 정보 조회 명령어]]
- [[#📈 시각화 및 디버깅]]
- [[#🏢 Workspace 관리]]
- [[#📦 모듈 및 Provider 관리]]
- [[#🔄 Import 및 Export]]
- [[#⚙️ 고급 옵션]]
- [[#💡 실용적인 명령어 조합]]
- [[#🔧 문제 해결 명령어]]
- [[#✨ Best Practices]]
- [[#📚 참고자료]]

---

## ⚡ 핵심 명령어

### terraform init

> [!note] 작업 디렉토리 초기화
> Provider 다운로드, 모듈 설치, Backend 설정 등을 수행합니다.

```bash
terraform init
terraform init -upgrade           # Provider 업그레이드
terraform init -reconfigure       # Backend 재설정
terraform init -migrate-state     # State 마이그레이션
```

### terraform plan

> [!tip] 실행 계획 생성
> 실제 변경 전 어떤 작업이 수행될지 미리 확인합니다.

```bash
terraform plan
terraform plan -out=plan.tfplan   # 계획을 파일로 저장
terraform plan -destroy           # 삭제 계획 확인
terraform plan -target=resource   # 특정 리소스만 계획
terraform plan -refresh=false     # 외부 변경사항 확인 건너뛰기
```

### terraform apply

> [!warning] 인프라 변경 적용
> 실제 리소스를 생성, 수정, 삭제합니다. 신중하게 사용하세요.

```bash
terraform apply
terraform apply -auto-approve      # 확인 없이 자동 적용
terraform apply plan.tfplan        # 저장된 계획 적용
terraform apply -target=resource   # 특정 리소스만 적용
```

### terraform destroy

> [!danger] 인프라 제거
> 모든 관리 리소스를 삭제합니다. 복구 불가능하니 주의하세요!

```bash
terraform destroy
terraform destroy -auto-approve    # 확인 없이 삭제
terraform destroy -target=resource # 특정 리소스만 삭제
```

---

## ✅ 검증 및 포맷팅

### terraform validate

> [!note] 설정 검증
> 문법 오류나 설정 문제를 사전에 발견합니다.

```bash
terraform validate
```

### terraform fmt

> [!tip] 코드 포맷팅
> HCL 파일을 표준 형식으로 자동 정렬합니다.

```bash
terraform fmt                     # 현재 디렉토리 포맷
terraform fmt -recursive          # 하위 디렉토리 포함
terraform fmt -check             # 포맷 필요 여부만 확인
terraform fmt -diff              # 변경사항 표시
```

---

## 📊 상태 관리 명령어

### terraform show

> [!example] 상태 표시
> ```bash
> terraform show                    # 현재 상태 표시
> terraform show plan.tfplan        # 저장된 계획 표시
> terraform show -json              # JSON 형식으로 출력
> ```

### terraform state

> [!warning] State 직접 조작
> State 파일을 직접 수정하는 것은 위험할 수 있습니다. 백업을 먼저 생성하세요.

```bash
terraform state list              # 리소스 목록
terraform state show <resource>   # 특정 리소스 상세 정보
terraform state mv <old> <new>    # 리소스 이름 변경
terraform state rm <resource>     # State에서 제거
terraform state pull              # Remote state 다운로드
terraform state push              # Remote state 업로드
```

### terraform refresh

> [!note] State 동기화
> 실제 인프라와 State를 동기화합니다.

```bash
terraform refresh
```

---

## 🔍 정보 조회 명령어

### terraform providers

> [!example] Provider 정보
> ```bash
> terraform providers
> terraform providers schema        # Provider 스키마 정보
> terraform providers mirror        # Provider 미러링
> ```

### terraform output

> [!tip] Output 값 조회
> 정의된 출력 변수의 값을 확인합니다.

```bash
terraform output                  # 모든 output 표시
terraform output <name>           # 특정 output 표시
terraform output -json            # JSON 형식으로 출력
terraform output -raw <name>      # Raw 값만 출력
```

### terraform version

```bash
terraform version
terraform version -json           # JSON 형식으로 출력
```

---

## 📈 시각화 및 디버깅

### terraform graph

> [!tip] 의존성 그래프 생성
> 리소스 간 의존관계를 시각적으로 확인할 수 있습니다.

```bash
terraform graph                   # DOT 형식으로 출력
terraform graph | dot -Tsvg > graph.svg  # SVG로 변환 (Graphviz 필요)
terraform graph | dot -Tpng > graph.png  # PNG로 변환
```

### terraform console

> [!example] 대화형 콘솔
> 표현식을 테스트하고 변수 값을 확인할 수 있습니다.
> ```bash
> terraform console
> 
> # 콘솔에서 사용 예시:
> > var.region
> > aws_instance.example.public_ip
> > [for s in var.subnets : s.cidr]
> ```

---

## 🏢 Workspace 관리

> [!note] Workspace란?
> 동일한 설정으로 여러 환경(dev, staging, prod)을 관리할 수 있게 해주는 기능입니다.

```bash
terraform workspace list          # Workspace 목록
terraform workspace show          # 현재 Workspace
terraform workspace new dev       # 새 Workspace 생성
terraform workspace select prod   # Workspace 전환
terraform workspace delete dev    # Workspace 삭제
```

---

## 📦 모듈 및 Provider 관리

### terraform get

> [!note] 모듈 다운로드
> 설정된 모듈을 다운로드하거나 업데이트합니다.

```bash
terraform get
terraform get -update            # 모듈 업데이트
```

### terraform providers lock

> [!tip] Provider 버전 고정
> 일관된 실행을 위해 Provider 버전을 잠급니다.

```bash
terraform providers lock
terraform providers lock -platform=linux_amd64
terraform providers lock -platform=darwin_arm64
```

---

## 🔄 Import 및 Export

### terraform import

> [!warning] 기존 리소스 가져오기
> 이미 존재하는 리소스를 Terraform 관리 하에 두려면 먼저 설정 파일에 리소스를 정의해야 합니다.

```bash
terraform import aws_instance.example i-1234567890abcdef0
terraform import -var-file=prod.tfvars aws_instance.example i-123456
```

---

## ⚙️ 고급 옵션

### 공통 옵션

> [!tip] 자주 사용되는 옵션들
> ```bash
> -var="key=value"                 # 변수 설정
> -var-file=filename               # 변수 파일 지정
> -state=path                      # State 파일 경로
> -backup=path                     # 백업 파일 경로
> -lock=true/false                 # State 잠금 여부
> -lock-timeout=0s                 # 잠금 대기 시간
> -input=true/false                # 대화형 입력 여부
> -parallelism=10                  # 병렬 처리 수
> ```

### 환경 변수

> [!example] 유용한 환경 변수 설정
> ```bash
> export TF_LOG=DEBUG              # 로그 레벨 설정
> export TF_LOG_PATH=terraform.log # 로그 파일 경로
> export TF_VAR_region=us-west-2   # 변수 설정
> export TF_CLI_ARGS_plan="-input=false"  # 명령어별 기본 옵션
> ```

---

## 💡 실용적인 명령어 조합

### CI/CD 파이프라인용

> [!example] 자동화 스크립트
> ```bash
> # 초기화 및 검증
> terraform init -input=false
> terraform validate
> 
> # 계획 생성 및 저장
> terraform plan -input=false -out=tfplan
> 
> # 적용
> terraform apply -input=false tfplan
> ```

### 디버깅용

> [!tip] 문제 해결 시 유용한 패턴
> ```bash
> # 상세 로그 활성화
> export TF_LOG=DEBUG
> terraform plan
> 
> # 특정 리소스만 디버깅
> terraform plan -target=aws_instance.problematic
> ```

### 대규모 인프라 관리

> [!note] 성능 최적화
> ```bash
> # 병렬 처리 증가
> terraform apply -parallelism=50
> 
> # 점진적 적용
> terraform apply -target=module.network
> terraform apply -target=module.compute
> terraform apply  # 나머지 전체
> ```

---

## 🔧 문제 해결 명령어

### 잠금 해제

> [!warning] State 잠금 강제 해제
> 다른 프로세스가 종료되지 않았는지 먼저 확인하세요.

```bash
terraform force-unlock <LOCK_ID>
```

### State 복구

> [!danger] 백업에서 복구
> ```bash
> # 백업에서 복구
> cp terraform.tfstate.backup terraform.tfstate
> 
> # 또는 원격에서 다시 가져오기
> terraform state pull > terraform.tfstate
> ```

### 리소스 재생성 강제

> [!tip] 특정 리소스 교체
> ```bash
> terraform apply -replace=aws_instance.example
> # 또는 (구버전)
> terraform taint aws_instance.example
> terraform apply
> ```

---

## ✨ Best Practices

> [!success] 명령어 사용 모범 사례
> 1. **항상 plan 먼저 실행**: 변경사항을 미리 확인
> 2. **-out 옵션 사용**: 계획을 파일로 저장하여 정확한 적용
> 3. **validate 정기 실행**: 문법 오류 조기 발견
> 4. **fmt 자동화**: pre-commit hook으로 자동 포맷팅
> 5. **적절한 parallelism**: 대규모 인프라는 값 증가
> 6. **로그 활성화**: 문제 해결 시 TF_LOG 사용
> 7. **백업 유지**: State 파일 정기 백업

---

## 📚 참고자료

### 관련 문서
- [[01. Terraform 기초]]
- [[07. Terraform 고급 개념]]
- [[06. Terraform 상태 관리]]
- [[03. Terraform init 상세]]
- [[00. Terraform 학습 가이드]]

### 외부 리소스
- [Terraform CLI 공식 문서](https://www.terraform.io/cli)
- [Terraform Commands (CLI) Reference](https://www.terraform.io/cli/commands)
- [Terraform Best Practices](https://www.terraform-best-practices.com/)

---

> [!quote]
> "좋은 도구는 작업을 가능하게 하지만, 훌륭한 도구는 작업을 즐겁게 만든다." - HashiCorp 개발팀